<!--pages/court/court.wxml-->
<view class="page">
  <!-- åœºåœ°åˆ—è¡¨ -->
  <view class="court-list">
    <view 
      class="court-card"
      wx:for="{{courts}}" 
      wx:key="id"
    >
      <view class="court-header">
        <view class="court-basic-info">
          <text class="court-name">{{item.name}}</text>
          <text class="court-type">{{item.type}}</text>
        </view>
        <view class="court-status-badge status-{{item.status}}">
          {{getStatusText(item.status)}}
        </view>
      </view>
      
      <view class="court-content">
        <view class="court-image">
          <image 
            class="court-img" 
            src="/images/court-{{item.id}}.jpg" 
            mode="aspectFill"
            lazy-load
          />
          <view class="image-overlay" wx:if="{{item.status !== 'available'}}">
            <text class="overlay-text">{{getStatusText(item.status)}}</text>
          </view>
        </view>
        
        <view class="court-details">
          <view class="detail-row">
            <text class="detail-label">ä»·æ ¼ï¼š</text>
            <text class="detail-value price">Â¥{{item.price}}/å°æ—¶</text>
          </view>
          <view class="detail-row">
            <text class="detail-label">ç±»å‹ï¼š</text>
            <text class="detail-value">{{item.type}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-label">çŠ¶æ€ï¼š</text>
            <text class="detail-value status-text-{{item.status}}">{{getStatusText(item.status)}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.currentUser}}">
            <text class="detail-label">ä½¿ç”¨è€…ï¼š</text>
            <text class="detail-value">{{item.currentUser}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.endTime}}">
            <text class="detail-label">ç»“æŸæ—¶é—´ï¼š</text>
            <text class="detail-value">{{item.endTime}}</text>
          </view>
        </view>
      </view>
      
      <view class="court-features">
        <view class="feature-title">åœºåœ°ç‰¹è‰²</view>
        <view class="feature-tags">
          <text class="feature-tag" wx:for="{{item.features}}" wx:key="*this">{{item}}</text>
        </view>
      </view>
      
      <view class="court-actions">
        <button 
          class="action-btn btn-secondary" 
          bindtap="viewCourtDetail"
          data-court="{{item}}"
        >
          æŸ¥çœ‹è¯¦æƒ…
        </button>
        <button 
          class="action-btn btn-primary" 
          bindtap="bookCourt"
          data-court="{{item}}"
          disabled="{{item.status !== 'available'}}"
        >
          {{item.status === 'available' ? 'ç«‹å³é¢„çº¦' : 'æš‚ä¸å¯çº¦'}}
        </button>
      </view>
    </view>
  </view>
  
  <!-- åˆ·æ–°æŒ‰é’® -->
  <view class="refresh-section">
    <button class="refresh-btn btn-secondary" bindtap="refreshCourts">
      ğŸ”„ åˆ·æ–°çŠ¶æ€
    </button>
  </view>
</view>

<!-- åœºåœ°è¯¦æƒ…å¼¹çª— -->
<view class="detail-modal" wx:if="{{showDetailModal}}" bindtap="closeDetailModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">{{selectedCourt.name}}</text>
      <text class="modal-close" bindtap="closeDetailModal">Ã—</text>
    </view>
    
    <view class="detail-content" wx:if="{{selectedCourt}}">
      <!-- åœºåœ°å›¾ç‰‡ -->
      <view class="detail-images">
        <swiper class="image-swiper" indicator-dots="true" autoplay="true">
          <swiper-item wx:for="{{selectedCourt.images}}" wx:key="*this">
            <image class="swiper-image" src="{{item}}" mode="aspectFill" />
          </swiper-item>
        </swiper>
      </view>
      
      <!-- åŸºæœ¬ä¿¡æ¯ -->
      <view class="detail-section">
        <text class="section-title">åŸºæœ¬ä¿¡æ¯</text>
        <view class="info-grid">
          <view class="info-item">
            <text class="info-label">åœºåœ°ç±»å‹</text>
            <text class="info-value">{{selectedCourt.type}}</text>
          </view>
          <view class="info-item">
            <text class="info-label">ä»·æ ¼</text>
            <text class="info-value price">Â¥{{selectedCourt.price}}/å°æ—¶</text>
          </view>
          <view class="info-item">
            <text class="info-label">é¢ç§¯</text>
            <text class="info-value">{{selectedCourt.area}}å¹³æ–¹ç±³</text>
          </view>
          <view class="info-item">
            <text class="info-label">åœ°é¢æè´¨</text>
            <text class="info-value">{{selectedCourt.surface}}</text>
          </view>
        </view>
      </view>
      
      <!-- è®¾æ–½è®¾å¤‡ -->
      <view class="detail-section">
        <text class="section-title">è®¾æ–½è®¾å¤‡</text>
        <view class="facility-list">
          <view class="facility-item" wx:for="{{selectedCourt.facilities}}" wx:key="*this">
            <text class="facility-icon">âœ“</text>
            <text class="facility-text">{{item}}</text>
          </view>
        </view>
      </view>
      
      <!-- ä½¿ç”¨è§„åˆ™ -->
      <view class="detail-section">
        <text class="section-title">ä½¿ç”¨è§„åˆ™</text>
        <view class="rules-list">
          <text class="rule-item" wx:for="{{selectedCourt.rules}}" wx:key="*this">{{index + 1}}. {{item}}</text>
        </view>
      </view>
      
      <!-- é¢„çº¦æŒ‰é’® -->
      <view class="modal-actions">
        <button 
          class="modal-btn btn-primary" 
          bindtap="bookSelectedCourt"
          disabled="{{selectedCourt.status !== 'available'}}"
        >
          {{selectedCourt.status === 'available' ? 'ç«‹å³é¢„çº¦' : 'æš‚ä¸å¯çº¦'}}
        </button>
      </view>
    </view>
  </view>
</view>